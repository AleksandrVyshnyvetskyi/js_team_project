{"mappings":"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","sources":["src/js/queue-list.js","src/js/fetch-films-main.js"],"sourcesContent":["import Pagination from './pagination.js';\nimport { renderFilmList } from \"./fetch-films-main.js\"\nimport { preloaderShowLonger } from './loader';\n\n\n\nconst pagination = new Pagination;\n\nconst refs = {\n    watched: document.querySelector('.header_btn-watched'),\n    queue: document.querySelector('.header_btn-queue'),\n    containerMovie: document.querySelector('.main-container--card__box'),\n    emptyPage: document.querySelector('.empty_page'),\n    paginationPage: document.querySelector('#section__pagination'),\n};\n\nconst getMovieStorage = localStorage.getItem('QUEUE_LIST');\nconst totalMovieElements = JSON.parse(getMovieStorage);\nconst countElpage = 10;\nlet totalMoviePages = 0;\n\n\nrefs.queue.addEventListener('click', onQueueClick);\n\n// if (totalMovieElements.length === 0) {\n//   refs.emptyPage.classList.add('visible');\n//   refs.paginationPage.style.display = \"none\";\n//   return;\n\n// } \n\n\n\nfunction onQueueClick(e) {\n    e.preventDefault();\n  refs.containerMovie.innerHTML = '';\n  refs.queue.classList.add('current-btn');\n  refs.watched.classList.remove('current-btn');\n    refs.queue.classList.remove('simple-btn');\n    refs.watched.classList.add('simple-btn');\n    \n  if (totalMovieElements.length !== 0) {\n    try {\n        paginationLibrary()\n       \n        refs.emptyPage.classList.remove('visible');\n\n    } catch (e) {\n      console.log(e);\n    }\n  } else { \n    refs.emptyPage.classList.add('visible');\n    refs.paginationPage.style.display = \"none\";\n    \n    return;\n  }\n}\n\n\nfunction paginationLibrary(page = false) { \n  preloaderShowLonger();\n  const queryPage = page ? page : 1; \n  const partMovie = [];\n\n  \n    for (let i = 1; i <= Math.ceil(totalMovieElements.length / countElpage); i += 1) { \n        let end = (countElpage * i);\n        let start = i > 1 ? (countElpage * (i - 1)) : 0;\n        if ((countElpage * i) > totalMovieElements.length) { \n          end = totalMovieElements.length;\n        }\n\n        partMovie[i] = (totalMovieElements.slice(start, end))\n    }\n    \n    totalMoviePages = partMovie.length - 1;\n      refs.containerMovie.innerHTML = \"\";\n    renderMoviesCard(partMovie[queryPage]);\n    \n  if (totalMoviePages > 1) { \n    pagination.setCurrentPage = queryPage;\n    pagination.setTotalPages = totalMoviePages; \n      pagination.setCallback = paginationLibrary; \n      \n    pagination.renderPagination(); \n      \n  }\n  \n}\n","import axios from 'axios';\nconst API_KEY = '2994e3a31c3cad99fd99bf3fe61d916f';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nimport Pagination from './pagination.js';\nimport API from './api-service.js';\nimport { addCurrrentMoviesToLocalStorage } from './local-storage';\nimport { preloaderShow, preloaderShowLonger, hidePreloader } from './loader';\n// import { renderFilmList } from './create-markup';\n\nconst refs = {\n  containerBox: document.querySelector(`.main-container--card__box`),\n  containerCard: document.querySelector(`.main-container--card`),\n};\n\nconst containerBox = document.querySelector(`.main-container--card__box`);\nconst inputEl = document.querySelector('.header_input');\n\nconst apiService = new API;\nconst pagination = new Pagination;\n\ngetPopularMovie();\n\n\n\n\n\n// Фун-ия, которая берет и передает данные по апи, имеет первый! параметр page = false. После параметра page можете передавать свои.\nfunction getPopularMovie(page = false) {\n  preloaderShowLonger();\n  const queryPage = page ? page : 1; // Проверка страниц, обязательно до fetch\n  apiService.setPageNumber = queryPage; // Передает текущую страницу в класс api\n\n\n\n  apiService.fetchPopularMovie().then(data => {\n    pagination.setCurrentPage = queryPage; // Передает страницу в пагинатор\n    pagination.setTotalPages = data.total_pages; // Передает общее кол-во страниц в пагинатор\n    pagination.setCallback = getPopularMovie; // Передает ссылку на коллбэк функцию\n    pagination.renderPagination(); // Вызов пагинации\n    addCurrrentMoviesToLocalStorage(data.results);\n    renderFilmList(data.results);\n  });\n}\n\nconst searchFilms = async () => {\n  const response = await axios.get(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}&language=en-US`\n  );\n  renderFilmList(response.data.results);\n  addCurrrentMoviesToLocalStorage(response.data.results);\n  return response.data;\n};\n\nsearchFilms();\n\nconst addGenresToLocalStorage = async () => {\n  const genres = await axios.get(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}&language=en-US`\n  );\n  localStorage.setItem('GENRES', JSON.stringify(genres.data.genres));\n};\n\naddGenresToLocalStorage();\n\n\n\n\n// function renderFilmList (films){\n//   const markup = films.map(film => {\n//       return `\n//         <li class=\"main-container--card\">\n//             <img\n//             class=\"film-poster\"\n//             src=\"${\n//               film.poster_path === null\n//                 ? './no_image.jpg'\n//                 : `https://image.tmdb.org/t/p/w500${film.poster_path}`\n//             }\" \n//                 alt=\"${film.original_title}\"\n//                 loading=\"lazy\" data-id=\"${film.id}\">\n//             <p class=\"film-info\">\n//             <h2 class=\"film-title\" data-id=\"${\n//               film.id\n//             }\">${film.original_title.toUpperCase()}</h2>\n//             <p class=\"more-info\"> ${transformId(\n//               film.genre_ids\n//             )} | ${film.release_date.slice(0, 4)}</p>\n//             </p>\n//         </li>\n//       `;\n//     })\n//     .join('');\n//   refs.containerBox.innerHTML = markup;\n// }\n\n\n// =============================================================================================================================\n\n\n// import refs from \"./refs\";\n// import { addCurrrentMoviesToLocalStorage } from \"./local-storage\"\n\n\n\n// const IMG_URL = \"https://image.tmdb.org/t/p/w500\"\n\n\n\n\n///////////// --функція для створення карток популярних фільмів на головну сторінку----///////\nfunction renderFilmList(films) {\n  refs.containerBox.innerHTML = '';\n\n    const markup = films\n      .map((film) => {\n            let date = film.release_date ?? film.first_air_date ?? null;\n            date = (date !== null) ? date.slice(0, 4) : '';\n            \n            let posterPath = ``\n            if(film.poster_path){posterPath=`${IMG_URL}${film.poster_path}`}\n            else{posterPath=\"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg\"}\n\n            return `\n            <li class=\"main-container--card\"\n        data-modal-open>\n        <img class=\"card-poster\"\n        data-id=\"${film.id}\" \n        src='${posterPath}'\n        alt=\"${film.original_name}\" loading=\"lazy\">\n        <div class=\"card-wrap\">\n        <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase()}</h2>\n        <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${date} </p>\n         </div>\n    </li>`;\n        }).join(\"\");\nrefs.containerBox.innerHTML = markup;\n}\n\nexport {renderFilmList};\n\n///////////// --функція для створення карток  фільмів в MY LIBRARY----///////\nfunction renderMoviesCard(films) {\n    const filmCards = films\n      .map((film) => {\n          let date = film.release_date ?? film.first_air_date ?? null;\n          date = (date !== null) ? date.slice(0, 4) : '';\n\n        if (!film.poster_path) {\n          return `\n        <li class=\"main-container--card\"\n        data-modal-open>\n          <img class=\"card-poster\"\n        data-id=\"${film.id}\" \n        src=\"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg\" >\n        <div class=\"card-wrap\">\n        <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase() || film.title.toUpperCase()}</h2>\n        <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${date} <span class=\"card-rating\"> ${film.vote_average.toFixed(1)}</span></p>\n         </div>\n    </li>`;\n        };        \n\n        return `\n        <li class=\"main-container--card\"\n        data-modal-open>\n          <img class=\"card-poster\"\n        data-id=\"${film.id}\" \n        src=\"${IMG_URL}${film.poster_path}\" \n        alt=\"${film.original_name}\" loading=\"lazy\">\n        <div class=\"card-wrap\">\n        <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase() || film.title.toUpperCase()}</h2>\n        <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${date} <span class=\"card-rating\"> ${film.vote_average.toFixed(1)}</span></p>\n         </div>\n    </li>`;\n        }).join(\"\");\n    \n    refs.moviesContainer.insertAdjacentHTML('beforeend', filmCards);\n    \n};\n\nexport {renderMoviesCard};\n\n\nfunction transformId([...arr]) {\n  const g = localStorage.getItem('GENRES');\n  const genres = JSON.parse(g);\n  let genreName;\n  const array = [...arr];\n  for (let i = 0; i < genres.length; i++) {\n    for (let x = 0; x < array.length; x++) {\n      if (array[x] === genres[i].id) {\n        genreName = genres[i].name;\n        array[x] = genreName;\n      }\n    }\n  }\n  // console.log(array)\n\n  if (array.length > 2) {\n    return `${array[0]}, ${array[1]}, Other`;\n  } else if (array.length === 1) {\n        return `${array[0]}`\n  }\n  else if (array.length === 0) {\n    return `No genre`;\n  }\n  return `${array[0]}, ${array[1]}`;\n}\n\n\n// import refs from \"./refs\";\n// import { addCurrrentMoviesToLocalStorage } from \"./local-storage\";\n\n\n// const IMG_URL = \"https://image.tmdb.org/t/p/w500\";\n\n\n\n\n// ///////////// --функція для створення карток популярних фільмів на головну сторінку----///////\n// function renderFilmList(films) {\n//     const markup = films\n//         .map((film) => {\n//         console.log(film)\n//             return `\n//             <li class=\"main-container--card\"\n//         data-modal-open>\n//         <img class=\"card-poster\"\n//         data-id=\"${film.id}\" \n//         src=\"${film.poster_path === null ? './no_image.jpg'\n//               : `${IMG_URL}${film.poster_path}`\n//           }\"\n//         alt=\"${film.original_name}\" loading=\"lazy\">\n//         <div class=\"card-wrap\">\n//         <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase() || film.title.toUpperCase()}</h2>\n//         <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${(film.release_date || first_air_date).slice(0,4)} </p>\n//          </div>\n//     </li>`;\n//         }).join(\"\");\n// refs.containerBox.innerHTML = markup;\n// }\n\n// export {renderFilmList};\n\n// ///////////// --функція для створення карток  фільмів в MY LIBRARY----///////\n// function renderMoviesCard(films) {\n//     const filmCards = films\n//     .map((film) => {\n//         return `\n//         <li class=\"main-container--card\"\n//         data-modal-open>\n//         <img class=\"card-poster\"\n//         data-id=\"${film.id}\" \n//         src=\"${IMG_URL}${film.poster_path}\" \n//         alt=\"${film.original_name}\" loading=\"lazy\">\n//         <div class=\"card-wrap\">\n//         <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase() || film.title.toUpperCase()}</h2>\n//         <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${(film.release_date || first_air_date).slice(0,4)} <span class=\"card-rating\"> ${film.vote_average.toFixed(1)}</span></p>\n//          </div>\n//     </li>`;\n//         }).join(\"\");\n    \n//     refs.moviesContainer.insertAdjacentHTML('beforeend', filmCards);\n    \n// };\n\n// export {renderMoviesCard};\n\n\n// ///////////// --функція для створення списку жанрів----///////\n// function transformId ([...arr]) {\n//     const g = localStorage.getItem(\"GENRES\");\n//     const genres = JSON.parse(g);\n//     let genreName;\n//     const array = [...arr]\n//     for (let i = 0; i < genres.length; i++) {\n//         for (let x = 0; x < array.length; x++) {\n//             if (array[x] === genres[i].id) {\n//                 genreName = genres[i].name;\n//                 array[x] = genreName\n//             };\n//         };\n//     };\n//      if (array.length > 2) {\n//         return `${array[0]}, ${array[1]}, Other`\n//     }\n//     return `${array[0]}, ${array[1]}`\n// };\n"],"names":["$jcFG7","parcelRequire","$bpxeT","$35001c1ba8f51596$var$API_KEY","$35001c1ba8f51596$var$IMG_URL","$35001c1ba8f51596$var$refs","containerBox","document","querySelector","containerCard","$35001c1ba8f51596$var$apiService","$1h2Gi","default","$35001c1ba8f51596$var$pagination","$35001c1ba8f51596$var$getPopularMovie","page","arguments","length","$kvC6y","preloaderShowLonger","queryPage","setPageNumber","fetchPopularMovie","then","data","setCurrentPage","setTotalPages","total_pages","setCallback","renderPagination","$4LMMA","addCurrrentMoviesToLocalStorage","results","$35001c1ba8f51596$export$f2275db3dee9e567","$35001c1ba8f51596$var$searchFilms","$parcel$interopDefault","$2TvXO","mark","_callee","response","$dIxxU","get","concat","_ctx","sent","$35001c1ba8f51596$var$addGenresToLocalStorage","genres","localStorage","setItem","JSON","stringify","films","innerHTML","markup","map","film","_release_date","ref","date","release_date","first_air_date","slice","posterPath","poster_path","id","original_name","original_title","toUpperCase","title","$35001c1ba8f51596$var$transformId","genre_ids","join","param","genreName","arr","$q7ZX2","g","getItem","parse","array","$8nrFW","i","x","name","$9313be0973dbaa58$var$pagination","$9313be0973dbaa58$var$refs","watched","queue","containerMovie","emptyPage","paginationPage","$9313be0973dbaa58$var$getMovieStorage","$9313be0973dbaa58$var$totalMovieElements","$9313be0973dbaa58$var$countElpage","$9313be0973dbaa58$var$totalMoviePages","$9313be0973dbaa58$var$paginationLibrary","partMovie","Math","ceil","end","start","renderMoviesCard","addEventListener","e","preventDefault","classList","add","remove","style","display","e1","console","log"],"version":3,"file":"library.116f00e9.js.map"}