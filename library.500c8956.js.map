{"mappings":"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","sources":["src/js/fetch-films-main.js","src/js/queue-list.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '2994e3a31c3cad99fd99bf3fe61d916f';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nimport Pagination from './pagination.js';\nimport API from './api-service.js';\nimport { addCurrrentMoviesToLocalStorage } from './local-storage';\nimport { preloaderShow, preloaderShowLonger, hidePreloader } from './loader';\n// import { renderFilmList } from './create-markup';\n\nconst refs = {\n  containerBox: document.querySelector(`.main-container--card__box`),\n  containerCard: document.querySelector(`.main-container--card`),\n};\n\nconst containerBox = document.querySelector(`.main-container--card__box`);\nconst inputEl = document.querySelector('.header_input');\n\nconst apiService = new API;\nconst pagination = new Pagination;\n\ngetPopularMovie();\n\n\n\n\n\n// Фун-ия, которая берет и передает данные по апи, имеет первый! параметр page = false. После параметра page можете передавать свои.\nfunction getPopularMovie(page = false) {\n  preloaderShowLonger();\n  const queryPage = page ? page : 1; // Проверка страниц, обязательно до fetch\n  apiService.setPageNumber = queryPage; // Передает текущую страницу в класс api\n\n\n\n  apiService.fetchPopularMovie().then(data => {\n    pagination.setCurrentPage = queryPage; // Передает страницу в пагинатор\n    pagination.setTotalPages = data.total_pages; // Передает общее кол-во страниц в пагинатор\n    pagination.setCallback = getPopularMovie; // Передает ссылку на коллбэк функцию\n    pagination.renderPagination(); // Вызов пагинации\n    addCurrrentMoviesToLocalStorage(data.results);\n    renderFilmList(data.results);\n  });\n}\n\nconst searchFilms = async () => {\n  const response = await axios.get(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}&language=en-US`\n  );\n  renderFilmList(response.data.results);\n  addCurrrentMoviesToLocalStorage(response.data.results);\n  return response.data;\n};\n\nsearchFilms();\n\nconst addGenresToLocalStorage = async () => {\n  const genres = await axios.get(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}&language=en-US`\n  );\n  localStorage.setItem('GENRES', JSON.stringify(genres.data.genres));\n};\n\naddGenresToLocalStorage();\n\n\n\n\n// function renderFilmList (films){\n//   const markup = films.map(film => {\n//       return `\n//         <li class=\"main-container--card\">\n//             <img\n//             class=\"film-poster\"\n//             src=\"${\n//               film.poster_path === null\n//                 ? './no_image.jpg'\n//                 : `https://image.tmdb.org/t/p/w500${film.poster_path}`\n//             }\" \n//                 alt=\"${film.original_title}\"\n//                 loading=\"lazy\" data-id=\"${film.id}\">\n//             <p class=\"film-info\">\n//             <h2 class=\"film-title\" data-id=\"${\n//               film.id\n//             }\">${film.original_title.toUpperCase()}</h2>\n//             <p class=\"more-info\"> ${transformId(\n//               film.genre_ids\n//             )} | ${film.release_date.slice(0, 4)}</p>\n//             </p>\n//         </li>\n//       `;\n//     })\n//     .join('');\n//   refs.containerBox.innerHTML = markup;\n// }\n\n\n// =============================================================================================================================\n\n\n// import refs from \"./refs\";\n// import { addCurrrentMoviesToLocalStorage } from \"./local-storage\"\n\n\n\n// const IMG_URL = \"https://image.tmdb.org/t/p/w500\"\n\n\n\n\n///////////// --функція для створення карток популярних фільмів на головну сторінку----///////\nfunction renderFilmList(films) {\n  refs.containerBox.innerHTML = '';\n\n    const markup = films\n      .map((film) => {\n            let date = film.release_date ?? film.first_air_date ?? null;\n            date = (date !== null) ? date.slice(0, 4) : '';\n            \n            let posterPath = ``\n            if(film.poster_path){posterPath=`${IMG_URL}${film.poster_path}`}\n            else{posterPath=\"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg\"}\n\n            return `\n            <li class=\"main-container--card\"\n        data-modal-open>\n        <img class=\"card-poster\"\n        data-id=\"${film.id}\" \n        src='${posterPath}'\n        alt=\"${film.original_name}\" loading=\"lazy\">\n        <div class=\"card-wrap\">\n        <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase()}</h2>\n        <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${date} </p>\n         </div>\n    </li>`;\n        }).join(\"\");\nrefs.containerBox.innerHTML = markup;\n}\n\nexport {renderFilmList};\n\n///////////// --функція для створення карток  фільмів в MY LIBRARY----///////\nfunction renderMoviesCard(films) {\n    const filmCards = films\n      .map((film) => {\n          let date = film.release_date ?? film.first_air_date ?? null;\n          date = (date !== null) ? date.slice(0, 4) : '';\n\n        if (!film.poster_path) {\n          return `\n        <li class=\"main-container--card\"\n        data-modal-open>\n          <img class=\"card-poster\"\n        data-id=\"${film.id}\" \n        src=\"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg\" >\n        <div class=\"card-wrap\">\n        <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase() || film.title.toUpperCase()}</h2>\n        <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${date} <span class=\"card-rating\"> ${film.vote_average.toFixed(1)}</span></p>\n         </div>\n    </li>`;\n        };        \n\n        return `\n        <li class=\"main-container--card\"\n        data-modal-open>\n          <img class=\"card-poster\"\n        data-id=\"${film.id}\" \n        src=\"${IMG_URL}${film.poster_path}\" \n        alt=\"${film.original_name}\" loading=\"lazy\">\n        <div class=\"card-wrap\">\n        <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase() || film.title.toUpperCase()}</h2>\n        <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${date} <span class=\"card-rating\"> ${film.vote_average.toFixed(1)}</span></p>\n         </div>\n    </li>`;\n        }).join(\"\");\n    \n    refs.moviesContainer.insertAdjacentHTML('beforeend', filmCards);\n    \n};\n\nexport {renderMoviesCard};\n\n\nfunction transformId([...arr]) {\n  const g = localStorage.getItem('GENRES');\n  const genres = JSON.parse(g);\n  let genreName;\n  const array = [...arr];\n  for (let i = 0; i < genres.length; i++) {\n    for (let x = 0; x < array.length; x++) {\n      if (array[x] === genres[i].id) {\n        genreName = genres[i].name;\n        array[x] = genreName;\n      }\n    }\n  }\n  // console.log(array)\n\n  if (array.length > 2) {\n    return `${array[0]}, ${array[1]}, Other`;\n  } else if (array.length === 1) {\n        return `${array[0]}`\n  }\n  else if (array.length === 0) {\n    return `No genre`;\n  }\n  return `${array[0]}, ${array[1]}`;\n}\n\n\n// import refs from \"./refs\";\n// import { addCurrrentMoviesToLocalStorage } from \"./local-storage\";\n\n\n// const IMG_URL = \"https://image.tmdb.org/t/p/w500\";\n\n\n\n\n// ///////////// --функція для створення карток популярних фільмів на головну сторінку----///////\n// function renderFilmList(films) {\n//     const markup = films\n//         .map((film) => {\n//         console.log(film)\n//             return `\n//             <li class=\"main-container--card\"\n//         data-modal-open>\n//         <img class=\"card-poster\"\n//         data-id=\"${film.id}\" \n//         src=\"${film.poster_path === null ? './no_image.jpg'\n//               : `${IMG_URL}${film.poster_path}`\n//           }\"\n//         alt=\"${film.original_name}\" loading=\"lazy\">\n//         <div class=\"card-wrap\">\n//         <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase() || film.title.toUpperCase()}</h2>\n//         <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${(film.release_date || first_air_date).slice(0,4)} </p>\n//          </div>\n//     </li>`;\n//         }).join(\"\");\n// refs.containerBox.innerHTML = markup;\n// }\n\n// export {renderFilmList};\n\n// ///////////// --функція для створення карток  фільмів в MY LIBRARY----///////\n// function renderMoviesCard(films) {\n//     const filmCards = films\n//     .map((film) => {\n//         return `\n//         <li class=\"main-container--card\"\n//         data-modal-open>\n//         <img class=\"card-poster\"\n//         data-id=\"${film.id}\" \n//         src=\"${IMG_URL}${film.poster_path}\" \n//         alt=\"${film.original_name}\" loading=\"lazy\">\n//         <div class=\"card-wrap\">\n//         <h2 class=\"card-title\" data-id=\"${film.id}\">${film.original_title.toUpperCase() || film.title.toUpperCase() || film.title.toUpperCase()}</h2>\n//         <p class=\"card-info\"> ${transformId(film.genre_ids)} | ${(film.release_date || first_air_date).slice(0,4)} <span class=\"card-rating\"> ${film.vote_average.toFixed(1)}</span></p>\n//          </div>\n//     </li>`;\n//         }).join(\"\");\n    \n//     refs.moviesContainer.insertAdjacentHTML('beforeend', filmCards);\n    \n// };\n\n// export {renderMoviesCard};\n\n\n// ///////////// --функція для створення списку жанрів----///////\n// function transformId ([...arr]) {\n//     const g = localStorage.getItem(\"GENRES\");\n//     const genres = JSON.parse(g);\n//     let genreName;\n//     const array = [...arr]\n//     for (let i = 0; i < genres.length; i++) {\n//         for (let x = 0; x < array.length; x++) {\n//             if (array[x] === genres[i].id) {\n//                 genreName = genres[i].name;\n//                 array[x] = genreName\n//             };\n//         };\n//     };\n//      if (array.length > 2) {\n//         return `${array[0]}, ${array[1]}, Other`\n//     }\n//     return `${array[0]}, ${array[1]}`\n// };\n","import Pagination from './pagination.js';\nimport { renderFilmList } from \"./fetch-films-main.js\"\nimport { preloaderShowLonger } from './loader';\n\n\n\nconst pagination = new Pagination;\n\nconst refs = {\n    watched: document.querySelector('.header_btn-watched'),\n    queue: document.querySelector('.header_btn-queue'),\n    containerMovie: document.querySelector('.main-container--card__box'),\n    emptyPage: document.querySelector('.empty_page'),\n    paginationPage: document.querySelector('#section__pagination'),\n};\n\nconst getMovieStorage = localStorage.getItem('QUEUE_LIST');\nconst totalMovieElements = JSON.parse(getMovieStorage);\nconst countElpage = 10;\nlet totalMoviePages = 0;\n\n\nrefs.queue.addEventListener('click', onQueueClick);\n\n// if (totalMovieElements.length === 0) {\n//   refs.emptyPage.classList.add('visible');\n//   refs.paginationPage.style.display = \"none\";\n//   return;\n\n// } \n\n\n\nfunction onQueueClick(e) {\n    e.preventDefault();\n  refs.containerMovie.innerHTML = '';\n  refs.queue.classList.add('current-btn');\n  refs.watched.classList.remove('current-btn');\n    refs.queue.classList.remove('simple-btn');\n    refs.watched.classList.add('simple-btn');\n    \n  if (totalMovieElements.length !== 0) {\n    try {\n        paginationLibrary()\n       \n        refs.emptyPage.classList.remove('visible');\n\n    } catch (e) {\n      console.log(e);\n    }\n  } else { \n    refs.emptyPage.classList.add('visible');\n    refs.paginationPage.style.display = \"none\";\n    \n    return;\n  }\n}\n\n\nfunction paginationLibrary(page = false) { \n  preloaderShowLonger();\n  const queryPage = page ? page : 1; \n  const partMovie = [];\n\n  \n    for (let i = 1; i <= Math.ceil(totalMovieElements.length / countElpage); i += 1) { \n        let end = (countElpage * i);\n        let start = i > 1 ? (countElpage * (i - 1)) : 0;\n        if ((countElpage * i) > totalMovieElements.length) { \n          end = totalMovieElements.length;\n        }\n\n        partMovie[i] = (totalMovieElements.slice(start, end))\n    }\n    \n    totalMoviePages = partMovie.length - 1;\n      refs.containerMovie.innerHTML = \"\";\n    renderMoviesCard(partMovie[queryPage]);\n    \n  if (totalMoviePages > 1) { \n    pagination.setCurrentPage = queryPage;\n    pagination.setTotalPages = totalMoviePages; \n      pagination.setCallback = paginationLibrary; \n      \n    pagination.renderPagination(); \n      \n  }\n  \n}\n"],"names":["$2shzp","parcelRequire","$7dbe43ef2045a1df$var$refs","containerBox","document","querySelector","containerCard","$7dbe43ef2045a1df$var$apiService","$7me8F","default","$7dbe43ef2045a1df$var$pagination","$2nhTy","$7dbe43ef2045a1df$var$getPopularMovie","page","$gjiCh","preloaderShowLonger","queryPage","setPageNumber","fetchPopularMovie","then","data","setCurrentPage","setTotalPages","total_pages","setCallback","renderPagination","$b5rV1","addCurrrentMoviesToLocalStorage","results","$7dbe43ef2045a1df$export$f2275db3dee9e567","async","response","$parcel$interopDefault","get","$7dbe43ef2045a1df$var$searchFilms","films","innerHTML","markup","map","film","_release_date","ref","date","release_date","first_air_date","slice","posterPath","poster_path","id","original_name","original_title","toUpperCase","title","$7dbe43ef2045a1df$var$transformId","genre_ids","join","$7dbe43ef2045a1df$export$f48ccfcd8b08d9f9","filmCards","vote_average","toFixed","moviesContainer","insertAdjacentHTML","arr","g","localStorage","getItem","genres","JSON","parse","genreName","array","i","length","x","name","setItem","stringify","$7dbe43ef2045a1df$var$addGenresToLocalStorage","$8041263fb52134b3$var$pagination","$8041263fb52134b3$var$refs","watched","queue","containerMovie","emptyPage","paginationPage","$8041263fb52134b3$var$getMovieStorage","$8041263fb52134b3$var$totalMovieElements","$8041263fb52134b3$var$totalMoviePages","$8041263fb52134b3$var$paginationLibrary","partMovie","Math","ceil","end","start","renderMoviesCard","addEventListener","e","preventDefault","classList","add","remove","style","display","e1","console","log"],"version":3,"file":"library.500c8956.js.map"}